@model PhoneStore_New.Areas.Admin.Models.ViewModels.CategoryListViewModel
@{
    ViewBag.Title = "Quản lý Danh mục";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<style>
    /* CSS cho các lựa chọn thanh toán */
    .message {
        padding: 10px;
        margin-bottom: 20px;
        border-radius: 5px;
        font-weight: bold;
        text-align: center;
    }

    .success {
        background-color: #d4edda;
        color: #155724;
    }

    .error {
        background-color: #f8d7da;
        color: #721c24;
    }

    .form-section {
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #fafafa;
        margin-bottom: 20px;
    }

        .form-section input[type="text"] {
            width: 70%;
            padding: 8px;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
</style>

<div class="admin-container">
    <h2>Quản lý Danh mục</h2>

    @* Hiển thị thông báo *@
    @if (!string.IsNullOrEmpty(Model.Message))
    {
        <div class="message @(Model.Message.Contains("thành công") ? "success" : "error")">
            @Model.Message
        </div>
    }

    @* === 1. TÌM KIẾM DANH MỤC === *@
    <div class="form-section">
        <h3>Tìm kiếm Danh mục</h3>
        @using (Html.BeginForm("Index", "Category", FormMethod.Get, new { @area = "Admin" }))
        {
            @Html.AntiForgeryToken()
            <input type="text" name="search_query" placeholder="Nhập tên danh mục..." value="@Model.SearchQuery" />
            <button type="submit" class="btn btn-default">Tìm kiếm</button>
        }
    </div>

    @* === 2. THÊM DANH MỤC MỚI === *@
    <div class="form-section">
        <h3>Thêm Danh mục mới</h3>
        @using (Html.BeginForm("Add", "Category", FormMethod.Post, new { @area = "Admin" }))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <input type="text" name="Name" placeholder="Tên danh mục mới (ví dụ: Samsung)" required />
            <button type="submit" class="btn btn-success">Thêm</button>
        }
    </div>

    @* === 3. DANH SÁCH DANH MỤC === *@
    <h3>Danh sách các Danh mục</h3>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Tên Danh mục</th>
                <th>Hành động</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Categories != null && Model.Categories.Any())
            {
                foreach (var category in Model.Categories)
                {
                    <tr>
                        <td>@category.CategoryId</td>
                        <td>@category.Name</td>
                        <td class="action-links">
                            @Html.ActionLink("Xóa", "Delete", new { area = "Admin", id = category.CategoryId }, new { @class = "btn btn-danger btn-xs", onclick = "return confirm('Bạn có chắc chắn muốn xóa danh mục này?');" })
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr><td colspan="3" class="text-center">Không có danh mục nào.</td></tr>
            }
        </tbody>
    </table>
</div>